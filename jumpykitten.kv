#:kivy 1.10.0
#:import Window kivy.core.window.Window

<BackgroundColor@Widget>
    background_color: 0, 0, 0, 0
    canvas.before:
        Color:
            rgba: root.background_color
        Rectangle:
            size: self.size
            pos: self.pos

<BackgroundLabel@Label+BackgroundColor>
    background_color: 0, 0, 0, 0

<BackgroundFloatLayout@FloatLayout+BackgroundColor>
    background_color: 0, 0, 0, 0

<JumpyKittenGame>:
    background: background
    Background:
        id: background
        pos: root.pos
    BackgroundLabel:
        id: bkgLabel
        background_color: 1,0.7,0.7,0.9
        font_size: 60
        bold: True
        text: " Score {:04.0f} ".format(root.score)
        size: self.texture_size
        y: 0.8*Window.size[1]
        x: 0.97*Window.size[0] - self.texture_size[0]
    BackgroundFloatLayout:
        id: coinFloat
        background_color: 1,0.7,0.7,0.9
        width: 0.09*Window.size[0]
        height: bkgLabel.height
        y: bkgLabel.y
        x: 0.03*Window.size[0]
        center_y: bkgLabel.y + 0.5*bkgLabel.height
        GridLayout:
            cols:3
            pos_hint: {'x':0, 'y': 0}
            size_hint: (1., 1.)
            Label:
                text: ''
                size_hint_x: 0.02
            Image:
                source: "images/COIN_HD.png"
                size_hint: (.25, .95)
                pos_hint_x: 0.05
                # height: 0.9*coinFloat.height
                # width: 0.9*coinFloat.height
                # y: coinFloat.y
                # x: coinFloat.x - coinFloat.width*0.45 + 0.9*coinFloat.height/2
            Label:
                id: coinLabel
                size_hint: (.70, .9)
                font_size: 60
                bold: True
                text: "{:03.0f} ".format(root.collected_coins)
                # size: self.texture_size
                # x: coinFloat.x + coinFloat.width*0.5 - self.texture_size[0]*0.5
                # y: coinFloat.y

<endGamePopup>:
    title: "Your kitten touched an obstacle"#"Score: " + '{:.0f}'.format(self.score)
    bold: True
    separator_height: 0
    # separator_color: 0x77 / 255., 0x6e / 255., 0x65 / 255., 1.
    # background_color: 0, 0, 0, .0
    size_hint: (.42, .7)
    pos_hint: {'x':.26, 'y':.15}
    title_size: 50
    reviveBotton: reviveBotton
    FloatLayout:
        id:content
        Button:
            size_hint: (.4, .5)
            pos_hint: {'x':.0, 'y':.5}
            on_release:
                root.dismiss()
                app.sm.current = 'MainPage'
                app.sm.current = 'GamePage'
            background_color: 0, 0, 0, .0
            Image:
                source: "images/icons/retry.png"
                y: self.parent.y
                x: self.parent.x
                size: self.parent.size
                allow_stretch: True
        Button:
            id: reviveBotton
            image: image
            size_hint: (.4, .5)
            pos_hint: {'x':.6, 'y':.5}
            on_release:
                root.dismiss()
                app.gamePage.game.revive()
            background_color: 0, 0, 0, .0
            Image:
                id:image
                source: "images/icons/revive.png"
                y: self.parent.y
                x: self.parent.x
                size: self.parent.size
                allow_stretch: True
        Button:
            size_hint: (.4, .5)
            pos_hint: {'x':.3, 'y':.0}
            on_release:
                root.dismiss()
                app.sm.current = 'MainPage'
            background_color: 0, 0, 0, .0
            Image:
                source: "images/icons/home.png"
                y: self.parent.y
                x: self.parent.x
                size: self.parent.size
                allow_stretch: True
